​                    **java****与数据库操作**

**[** **实验目的** **]**

**1****）了解****Java****连接数据库的思路**

**2****）掌握****Java****连接****MYSQL****数据库的方法。**

**3****）** **掌握使用****Java****对数据库进行查询、添加、修改等操作。**

**[** **实验内容** **]**

 (1)连接上数据库，并判断输入的用户名、密码是否和数据库的信息是否匹配，如果匹配成功则显示登录成功，如匹配失败则显示登录失败。

 (2)实现数据的增删改查，完成一个简单的学生信息管理系统。

**涉及知识点：** ----------------------------------------------------------

  Java连接数据库的主要两种方式： JDBC-ODBC 桥连接方式 和 加载纯Java数据库驱动程序方式。

1）JDBC-ODBC 桥连接方式，即通过控制面板---管理工具---数据源，添加数据库源，选择驱动等方式实现的。 优点：操作较简单，实现容易； 缺点：与当前电脑固定位置的数据库连接，可移植性差。

2）加载纯Java 数据库驱动程序，即找对应数据库的连接*.JAR 包，把该包添加到classpath路径中，使用时访问即可。优点：可移植好。 

 

一、导入数据

\1. 使用cmd提示符登录数据库数据库（使用navicat工具也行）。

登录命令：mysql -u root –p

输入密码：123456

2.创建数据库和数据表，并导入数据。

详见脚本ex.sql。

二、加载纯Java数据库驱动程序方式。

1.先将数据库驱动jar包拷到新建的工程目录lib。

![img](11.java%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C.assets/clip_image002.jpg)

2.导入。选择“Project Structure”→“Modules”→“Dependencies”，单击最右侧加号后选择第一项：JARs or directories…，在弹出框中选择下载好的Jar包确认。

![img](11.java%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C.assets/clip_image004.gif)

2.运行连接数据库的测试代码

![img](11.java%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C.assets/clip_image006.jpg)

![img](11.java%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C.assets/clip_image008.jpg)

3.登录分析，可让其执行的SQL语句以及思路为：

String sql= "SELECT  *  FROM admin  WHERE uname='" +**用户名** + "'and upass=’"+**密 码**+” ‘ ”;  //定义sql语句

 ResultSet rs = statement.executeQuery(sql); //执行sql语句

 **if**(rs.next()) // 判断结果集中是否有结果，如真表示有此用户

**{** **显示登录成功** **，进入主菜单** **}**    

 else    //表示用户名或密码输入错误

 {**登录失败！** **程序结束****}**

![img](11.java%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C.assets/clip_image010.jpg)![img](11.java%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C.assets/clip_image012.jpg)

 

 

\4. 实现数据库的增删改查操作。

![img](11.java%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C.assets/clip_image014.jpg)

![img](11.java%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C.assets/clip_image015.jpg)![img](11.java%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C.assets/clip_image016.jpg)![img](11.java%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C.assets/clip_image017.jpg)![img](11.java%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C.assets/clip_image018.jpg)![img](11.java%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C.assets/clip_image019.jpg)

 

 

 

 

 

 

 

 

 