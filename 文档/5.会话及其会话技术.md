## 案例5-1 Cookie对象和常用API介绍

### 一、案例描述

1、考核知识点

   名称：Cookie对象和常用API介绍

  编号：028005002

2、练习目标

Ø 掌握Cookie对象和常用API的运用。

3、需求分析

  现状电商网站发展迅速，在网站浏览的客户，包括非注册用户较多，时常浏览各种商品信息，在用户关闭浏览器，下次再进行访问的时候，有些网站会记住该浏览器用户上次的访问查看记录，这是一种非常便捷友好的设计。本案例就模拟演示展示用户上次浏览商品记录信息。

4、设计思路（实现原理）

1） 创建Demo1类继承Httpservlet类，

2） 在Demo1中获取所有的cookie并遍历，查看是否有上次存储的浏览商品记录信息，如果没有通过Cookie cookie=new Cookie("product" , "IPhone7"); 设置，否则显示出所有保存在cookie中的商品。

3） 在web.xml中配置初始化参数和类的映射

​    4）通过浏览器访问Demo1，查看页面效果。

### 二、案例实现

编写Demo1，配置web.xml文件:

  启动Tomcat服务器，在地址栏中输入http://localhost:8080/chapter05/ Demo1，首次访问浏览器显示的结果如下图所示：

![img](5.%E4%BC%9A%E8%AF%9D%E5%8F%8A%E5%85%B6%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF.assets/clip_image002.jpg)

在浏览器上新打开一个页面，再次访问http://localhost:8080/chapter05/ Demo1，浏览器显示的结果如下图所示：

![img](5.%E4%BC%9A%E8%AF%9D%E5%8F%8A%E5%85%B6%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF.assets/clip_image004.jpg)

 

## 案例5-2 用session实现购物车

### 一、案例描述

设计思路（实现原理）

对教材购物车案例（p151-p157）进行修改 ，在原案例基础上，增加要求：

1） 当购买某本书后，再次访问图书列表，不能显示已经购买了的图书

2） 购物车中的图书，增加取消订单功能，点击“取消订单”后，在购物车中删除已经购买的图书

 

 

## 案例5-4 [任务5-3]Session实现用户登录

### 一、案例描述

1、考核知识点

   名称：[任务5-3]Session实现用户登录

  编号：028005007

2、练习目标

Ø 掌握Session对象和常用API的运用。

3、需求分析

  在实际运用中的用户登陆网站中，多提供有记住密码和自动登陆等功能，方便同一用户短时间内不用再输入用户名和密码等繁琐信息可以快捷登陆。本案例将模拟用户自动登陆功能。

4、设计思路（实现原理）

3） 创建login.html页面，编写用户登陆界面

4） 创建Demo6类， 编写用户登陆判断逻辑处理和自动登陆业务，

5） 在web.xml中配置初始化参数和类的映射

​    4）通过浏览器访问login.html，进行相关操作，查看页面效果。

### 二、案例实现

编写Demo6，其代码如下：

配置login.html文件:

配置web.xml文件:

启动Tomcat服务器，在地址栏中输入http://localhost:8080/chapter05/ login.html，访问浏览器显示的结果如下图所示：

![img](5.%E4%BC%9A%E8%AF%9D%E5%8F%8A%E5%85%B6%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF.assets/clip_image006.jpg)

在输入框随机输入用户名，如”zhangsan”，第一次不选中自动登陆框，然后点击提交按钮，浏览器显示的结果如下图所示：

![img](5.%E4%BC%9A%E8%AF%9D%E5%8F%8A%E5%85%B6%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF.assets/clip_image008.jpg)

​    则用户就会登陆网站了，当点击上图页面中的退出按钮就又返回到了初始登陆页面，如下所示；

  

![img](5.%E4%BC%9A%E8%AF%9D%E5%8F%8A%E5%85%B6%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF.assets/clip_image009.jpg)

可以在不输入用户名的情况下点击提交按钮，查看浏览器页面出现以下结果：

![img](5.%E4%BC%9A%E8%AF%9D%E5%8F%8A%E5%85%B6%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF.assets/clip_image011.jpg)

提醒用户输入用户名（因为还没有选中自动登陆功能），2秒后自动跳转到登陆页面，让用户必须登陆才可以；

第二次，在登陆界面随机输入用户名，如”zhangsan”，在勾选自动登陆框，点击提交按钮，浏览器显示结果如下：

![img](5.%E4%BC%9A%E8%AF%9D%E5%8F%8A%E5%85%B6%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF.assets/clip_image012.jpg)

则用户就会登陆网站了，当点击上图页面中的退出按钮就又返回到了初始登陆页面，这次不用输入用户名（必须在退出后的5秒内，因为代码中设置cookie的有效期是5秒钟），再次直接点击提价按钮，浏览器显示结果如下（用户实现了自动登陆功能）：

![img](5.%E4%BC%9A%E8%AF%9D%E5%8F%8A%E5%85%B6%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF.assets/clip_image014.jpg)

  

 

 